<!DOCTYPE html>
<html lang="en">
<head>
    <title>A-Level. React. Hooks.</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
        pre code {
            font-size: 20px;
        }
    </style>
</head>
<body class="shower list">

    <header class="caption">
        <h1>A-Level. React. Hooks.</h1>
    </header>

    <section class="slide" id="cover">
        <h2>
            <img
                src="./assets/react-logo.svg"
                alt="React Logo"
                style="height: auto; width: 100px; margin-bottom: -10px"
            ><span>Hooks</span>
        </h2>
        <style>
            #cover h2 {
                color: #61dafb;
                text-align: center;
                font-size: 70px;
                position: relative;
                top: 50%;
                transform: translateY(calc(-50% - 75px));
            }
        </style>
    </section>

    <section class="slide">
        <h2>Теми</h2>
        <ol>
            <li>State</li>
            <li>Hooks</li>
        </ol>
    </section>

    <section class="slide">
        <h2>State. Часткове злиття.</h2>
        <p>Коли ми викликаємо setState(), React обʼєдгає новий стан із поточним.</p>
        <pre>
            <code>state = {</code>
            <code>  firstname: '',</code>
            <code>  lastname: '',</code>
            <code>}</code>
            <code>...</code>
            <code>this.setState({ lastname: 'Petia' })</code>
        </pre>
    </section>

    <section class="slide">
        <h2>State. Підняття стану.</h2>
        <p>Для будь-яких змінюваних даних у React-додатку має бути одне "джерело істини".</p>
        <p>
            Тобто, якщо декілька компонентів повинні відображати одні й ті самі змінювані дані,
            у такому випадку піднімаємо спільний стан до найближчого спільного батьківського компонента.
        </p>
    </section>

    <section class="slide state-hoisting">
        <pre>
            <code>class App extends Component {</code>
            <code>  state = { firstName: '', lastName: '' };</code>
            <code>&nbsp;</code>
            <code>  onChange = (e) => { ... };</code>
            <code>&nbsp;</code>
            <code>  render() {</code>
            <code>    const { firstName, lastName } = this.state;</code>
            <code>    return (</code>
            <code>      &lt;Fragment&gt;</code>
            <code>        &lt;Form firstName={firstName} lastName={lastName} onChange={this.onChange} /&gt;</code>
            <code>        &lt;Greeting firstName={firstName} lastName={lastName} /&gt;</code>
            <code>        &lt;/Fragment&gt</code>
            <code>     )</code>
            <code>  }</code>
            <code>}</code>
        </pre>
        <style>
            .state-hoisting pre code {
                font-size: 16px;
            }
        </style>
    </section>

    <section class="slide">
        <h2>Hooks (Хуки)</h2>
        <p>Хуки — дозволяють використовувати стан та інші можливості React без написання класів (у функціональних компонентах).</p>
        <div><b>Правила:</b></div>
        <ul style="flex-grow: 1">
            <li>Хуки не працюють всередині класів.</li>
            <li>Не викликайте хуки всередині циклів, умов або вкладених функцій.</li>
            <li>
                Викликайте хуки лише у функціональних компонентах. Не викликайте їх у звичайних функціях.
                Виключення — це <i>користувацькі хуки</i>.
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2>Hooks</h2>
        <div>Найпопулярніші:</div>
        <ul>
            <li><i>useState</i> - надаємо нашому функціональному компоненту внутрішній стан.</li>
            <li>
                <i>useEffect</i> - дає змогу використовувати методи життєвого циклу. Аналог для
                <code>componentDidMount</code>, <code>componentDidUpdate</code> та <code>componentWillUnmount</code>
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2>useState</h2>
        <p>
            Надає нашому функціональному компоненту внутрішній стан.
            React зберігатиме цей стан між рендерами.
        </p>
        <div><code>const [state, setState] = useState(initialState);</code></div>
        <ul>
            <li><i>state</i> - стан</li>
            <li><i>setState</i> - функція для зміну стану</li>
            <li><i>initialState</i> - дефолтне значення</li>
        </ul>

    </section>

    <section class="slide">
        <h2>useState</h2>
        <pre>
            <code>function Counter() {</code>
            <code>  const [count, setCount] = useState(0);</code>
            <code>  return (</code>
            <code>    &lt;div&gt;</code>
            <code>      &lt;p&gt;Ви клікнули {count} разів&lt;/p&gt;</code>
            <code>      &lt;button onClick={() => setCount(count + 1)}&gt;Тисни&lt;/button&gt;</code>
            <code>    &lt;/div&gt;</code>
            <code>  );</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>useEffect</h2>
        <p>
            Хук useEffect являє собою сукупність методів. <code>componentDidMount</code>,
            <code>componentDidUpdate</code> та <code>componentWillUnmount</code>.
        </p>
    </section>

    <section class="slide">
        <h2>useEffect</h2>
        <ul>
            <li>
                Эффект запустит нашу функцию после того, как React отправил изменения в DOM
                (т.е. эффект не выполняется, пока браузер не отрисует все изменения)
            </li>
            <li>По умолчанию, React запускает эффекты после каждого рендера, включая первый рендер.</li>
            <li>С помощью хуков, мы можем разделить наш код основываясь на том, что он делает, а не по принципам методов жизненного цикла.</li>
        </ul>
    </section>

    <section class="slide">
        <h2>useEffect.</h2>
        <ul>
            <li><code>useEffect(callback)</code> - запускати завжди</li>
            <li>
                <code>useEffect(callback, [])</code> - запускати лише при mount і unmount (тобто ефект не залежить
                ні від жодного параметра, а якщо не залежить, то його не потрібно перезапускати).
            </li>
            <li>
                <code>useEffect(callback, [arg1, ...])</code> - запускати цей ефект, якщо змінився хочаб якийсь параметри в масиві
                (тобто із замикання він бере поточні, а з масиву попередні та порівнює).
            </li>
        </ul>
    </section>

    <section class="slide">
        <pre>
            <code>const Counter = () => {</code>
            <code>  const [count, setCount] = useState(0);</code>
            <code>&nbsp;</code>
            <code>  useEffect(() => {</code>
            <code>    document.title = `click: ${count}`;</code>
            <code>  })</code>
            <code>&nbsp;</code>
            <code>  return (</code>
            <code>    &lt;button onClick={() => setCount(count + 1)}&gt;Click&lt;/button&gt;</code>
            <code>  );</code>
            <code>};</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Tasks</h2>
        <p>Переробити всі завдання із минулого заняття на Хуки.</p>
    </section>

    <section class="slide">
        <h2>Links</h2>
        <ul>
            <li>
                <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Деструктуризация</a>
            </li>
            <li>
                <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi">
                    React Developer Tools
                </a>
            </li>
            <li>
                <a href="https://uk.legacy.reactjs.org/docs/forms.html">Работа з формами</a>
            </li>
            <li>
                <a href="https://uk.legacy.reactjs.org/docs/lifting-state-up.html">Підйом стану</a>
            </li>
            <li>
                <a href="https://uk.legacy.reactjs.org/docs/hooks-state.html">useState</a>
            </li>
            <li>
                <a href="https://uk.legacy.reactjs.org/docs/hooks-effect.html">useEffect</a>
            </li>
            <li>
                <a href="https://github.com/streamich/react-use">Коллекція хуків</a>
            </li>
        </ul>
    </section>

    <div class="progress"></div>

    <script src="shower/shower.js"></script>
    <!-- Copyright © 3000 Yours Truly, Famous Inc. -->

</body>
</html>
